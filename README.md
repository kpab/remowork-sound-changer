# Remowork Sound Changer

> **[Remowork](https://remowork.biz/)** - バーチャルオフィスで、チームをもっと近くに。

Remoworkの着信音・通知音をカスタマイズするChrome拡張機能です。

## 機能

### 音声カスタマイズ
- 各種通知音をカスタム音声に差し替え
- 70種類以上のプリセット音声から選択可能
- 自分の音声ファイルをアップロード可能

### 通話録音
- 双方向の通話を録音（自分と相手の声を両方記録）
- 録音履歴の管理とダウンロード
- WebM形式で高品質保存

### ハンドサイン検出（MediaPipe）
- **MediaPipe Tasks Vision**による本格的な手検出
- オンラインメンバーの在席確認画像から手を検出
- 手が検出されると「お話しOKです」通知を表示
- カスタマイズ可能な通知音（デフォルト: 法螺貝）

### 仮想カメラ（ハンドサイン送信）
- 👋（手を振る）と👍（サムズアップ）の画像を事前登録
- 在席確認の撮影時に登録画像をランダム送信
- 最大12枚まで登録可能
- 保存済み画像の一覧表示・個別削除・全削除機能

### 撮影タイマー
- 次の在席確認撮影までのカウントダウン表示
- ドラッグで画面上の好きな位置に配置可能
- 通知テストボタン（🔔）で動作確認
- 音声変更ボタン（🔊）でポップアップを開かずに音声設定
- 事前撮影ボタン（📸）と録音ボタン（🎙️）を個別に配置

### その他
- ログイン画面では全ウィジェットを自動非表示
- SPA対応（ページ遷移を監視）
- ダークモード対応UI

## インストール

### 1. 拡張機能をダウンロード

`remowork-sound-changer.zip` をダウンロードして展開、または `remowork-sound-changer` フォルダをローカルに保存します。

### 2. Chromeの拡張機能ページを開く

1. Chromeを開く
2. アドレスバーに `chrome://extensions/` と入力してEnter
3. または、メニュー → 拡張機能 → 拡張機能を管理

### 3. デベロッパーモードを有効化

ページ右上の「デベロッパーモード」トグルをONにします。

### 4. 拡張機能を読み込む

1. 「パッケージ化されていない拡張機能を読み込む」ボタンをクリック
2. `remowork-sound-changer` フォルダを選択
3. 「選択」をクリック

### 5. インストール完了

ツールバーにスピーカーアイコンが表示されれば成功です。

## 使い方

### 音声設定

1. ツールバーの拡張機能アイコンをクリックして設定画面を開く
2. 変更したい音声のドロップダウンから選択：
   - **オリジナル**: Remoworkのデフォルト音声
   - **プリセット**: 同梱のサウンドから選択
   - **カスタム**: 自分の音声ファイルをアップロード
3. 再生ボタン（▶）でプレビュー
4. 停止ボタン（■）で停止

> **初回設定時の注意**: 音声を設定した後、Remoworkのページをリロード（Ctrl+R / Cmd+R）すると確実に反映されます。

### 対応音声

| 名前 | 説明 |
|------|------|
| 発信中（呼び出し音） | 相手を呼び出し中に鳴る音 |
| 着信音 | 電話がかかってきた時に鳴る音 |
| 発信音 | 発信ボタンを押した時に鳴る音 |
| 切断音 | 通話が終了・切断された時に鳴る音 |
| ドアチャイム | 内線着信時に鳴る音 |

### 録音機能

Remoworkサイト上で通話を録音できます。

1. Remoworkサイトを開くと、右上に録音パネルが表示される
2. 赤い録音ボタン（●）をクリックして録音開始
3. 「タブを共有」ダイアログで**現在のタブを選択**
4. **「タブの音声を共有」にチェック**（重要！相手の声を録音するため）
5. 停止ボタン（■）で録音終了
6. 録音履歴からダウンロード（↓）または再生（▶）

> 録音形式: WebM（Opus）

### 機能の無効化

右上のトグルスイッチをOFFにすると、音声差し替えを一時的に無効化できます。

### ハンドサイン検出

Remoworkの在席確認画像から、他のメンバーの手を検出して通知します。

#### 設定方法
1. 拡張機能のポップアップで「👋 ハンドサイン」タブを開く
2. 「ハンドサイン検出」トグルをONにする
3. 自分の名前を設定（自動検出もされます）
4. 検出対象を選択（全員 or 特定メンバー）
5. 通知方法を設定（トースト表示 / 通知音）
6. 通知音を選択（デフォルト: 法螺貝）

#### 検出動作
- 手が検出されると「🙋 お話しOKです」という通知を表示
- 同じ人からの通知は5分間クールダウン
- 10秒ごとに画像をスキャン

> **技術情報**: ハンドサイン検出はMediaPipe Tasks Visionを使用しています。GPU優先で動作し、失敗時はCPUにフォールバックします。検出処理はオフスクリーンドキュメントで実行されるため、メインページのパフォーマンスに影響しません。

### 仮想カメラ（ハンドサイン送信）

自分の在席確認画像として、事前に撮影した画像を送信できます。

#### 設定方法
1. タイマーUIの「📸 事前撮影」ボタンをクリック
2. カメラプレビューが表示される
3. 👋または👍のポーズで撮影ボタンをクリック（3秒カウントダウン後に撮影）
4. 最大12枚まで登録可能
5. 保存済み画像は一覧で確認・削除可能

#### 使い方
1. Remoworkサイト左下のタイマーUIで👋または👍ボタンをクリック
2. ボタンが緑色に光ったら「有効」状態
3. 次の在席確認撮影時に、登録画像からランダムで1枚が送信される
4. 送信後は自動的に通常カメラに戻る

#### 録音機能（タイマーUI）
1. タイマーUIの「🎙️」ボタンをクリック
2. 録音モーダルが開く
3. 録音ボタンで開始、停止ボタンで終了
4. 録音履歴から再生・ダウンロード可能

## 対応サイト

- `https://stage.remowork.biz/*`
- `https://remowork.biz/*`

## カスタム音声のアイデア

### 着信音
- 猫の鳴き声
- 好きなアニメのSE
- レトロな黒電話の音

### 切断音
- ファンファーレ
- ゲームのレベルアップ音
- 拍手の音

### 発信音
- 冒険に出発するようなBGM
- ロケット発射音

### ドアチャイム
- リアルなピンポーン
- ノック音
- 鳥のさえずり

> 対応形式: MP3, WAV, OGG, M4A など

## トラブルシューティング

### 音声が変わらない

1. 拡張機能が有効になっているか確認（トグルがON）
2. ページをリロード（Ctrl+R / Cmd+R）
3. 拡張機能を再読み込み（chrome://extensions/ で更新ボタン）

### 相手の声が録音されない

録音開始時のダイアログで「タブの音声を共有」にチェックを入れてください。

### アイコンが表示されない

1. chrome://extensions/ で拡張機能が有効か確認
2. ツールバーの拡張機能アイコン（パズルピース）をクリック
3. 「Remowork Sound Changer」をピン留め

### ハンドサイン検出が動作しない

1. 「ハンドサイン検出」トグルがONになっているか確認
2. 拡張機能を再読み込み（chrome://extensions/ で更新ボタン）
3. ブラウザのコンソール（F12）でエラーを確認

### 仮想カメラの画像撮影でカメラにアクセスできない

1. ブラウザの設定でカメラへのアクセスを許可
2. 他のアプリがカメラを使用中でないか確認
3. ポップアップでは権限ダイアログが表示されない場合があります。設定画面から許可してください

### タイマーUIが表示されない

1. ログイン画面ではウィジェットは表示されません
2. ログイン後、ページをリロードしてください
3. 「ハンドサイン検出」トグルがONになっているか確認

## ライセンス

MIT License

© 2025 Thousand Wings. All rights reserved.

---

> **[Remowork](https://remowork.biz/)** を使ってみませんか？バーチャルオフィスでリモートワークをもっと快適に。
